{"name":"Meteor-ipgeocoder","tagline":"IP geocoder for Meteor","body":"# IP Address Geocoder for Meteor\r\n\r\nGeocode IP addresses using [MaxMind](https://www.maxmind.com/) IP database. Here's a [demo](https://ipgeocoder.herokuapp.com/).\r\n\r\n## Install\r\n\r\n```\r\nmeteor add thebakery:ipgeocoder\r\n```\r\n\r\n## Use (server only)\r\n\r\n```\r\n// you can do it synchronously \r\nvar geoData = IPGeocoder.geocode('82.124.236.10');\r\n\r\n// or asynchronously\r\nIPGeocoder.geocode('82.124.236.10', function(error, result){\r\n\tif(!error){\r\n\t\t// good to go\r\n\t}\r\n});\r\n```\r\n\r\n**Note**: IPGeocoder downloads and parses IP database in the background. You can either explicitly ask for the data to be downloaded or let IPGeocoder do it once the first call to geocode arrives. If the lib is busy downloading the database, it will throw an exception saying 'the database is not ready'. So it might be a good idea to load data on server startup\r\n\r\n```\r\n// somewhere on the server\r\nMeteor.startup(function(){\r\n  IPGeocoder.load();\r\n});\r\n```\r\n\r\n## Data Format\r\n\r\nBy default, IPGeocoder.geocode will return data in the following format (which is probably sufficient for most cases)\r\n\r\n```\r\n{\r\n\tcity: {\r\n\t\tname: \"Neuilly-sur-Seine\"\r\n\t},\r\n\tcontinent: {\r\n\t\tname: \"Europe\",\r\n\t\tcode: \"EU\"\r\n\t},\r\n\tcountry: {\r\n\t\tname: \"France\",\r\n\t\tcode: \"FR\"\r\n\t},\r\n\tlocation: {\r\n\t\tlatitude: 48.8833,\r\n\t\tlongitude: 2.2667,\r\n\t\ttime_zone: \"Europe/Paris\"\r\n\t}\r\n}\r\n``` \r\n\r\nYou can also ask for verbose output based on MaxMind's [spec](http://dev.maxmind.com/geoip/geoip2/web-services/)\r\n\r\n```\r\nvar verbose = true;\r\n\r\n// you can do it synchronously \r\nvar geoData = IPGeocoder.geocode('82.124.236.10', null, verbose);\r\n\r\n// or asynchronously\r\nIPGeocoder.geocode('82.124.236.10', function(error, result){\r\n\tif(!error){\r\n\t\t// good to go\r\n\t}\r\n}, verbose);\r\n```    \r\n\r\n## Configure\r\n\r\nBy default, geocoder will download data from [http://geolite.maxmind.com/download/geoip/database/GeoLite2-City.mmdb.gz](http://geolite.maxmind.com/download/geoip/database/GeoLite2-City.mmdb.gz). You can adjust this in 2 ways:\r\n\r\n```\r\n//ask for specific version to be loaded explicitly\r\nIPGeocoder.load('http://geolite.maxmind.com/download/geoip/database/GeoLite2-City.mmdb.gz');\r\n``` \r\n\r\nOr adjust the path in Meteor.settings \r\n\r\n```\r\n{\r\n\t\"IPGeocoder\" : {\r\n\t\t\"databaseUrl\" : \"https://dl.dropboxusercontent.com/u/9224326/geogit/GeoLite2-City.mmdb.gz\"\r\n\t}\r\n}\r\n```\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}